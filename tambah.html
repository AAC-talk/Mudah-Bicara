<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Mode Guru - Tambah Kosakata Simple</title>
<style>
  body { font-family: Arial; max-width: 600px; margin: auto; padding: 20px; }
  label, select, input, button { display: block; width: 100%; margin-top: 10px; font-size: 1.1em; }
  #previewEmotikon { font-size: 3em; text-align: center; margin-top: 10px; }
  ul { padding-left: 0; list-style: none; }
  li { background: #eee; margin: 8px 0; padding: 8px; border-radius: 6px; display: flex; justify-content: space-between; }
  button.del { background: #e74c3c; border: none; color: white; border-radius: 4px; cursor: pointer; }
</style>
</head>
<body>

<h1>Mode Guru - Tambah Kosakata</h1>

<form id="formTambah" onsubmit="simpanKosakata(event)">
  <label for="kategori">Kategori:</label>
  <select id="kategori" required>
    <option value="">-- Pilih Kategori --</option>
    <option value="emosi">Emosi & Perasaan</option>
    <option value="kebutuhan">Kebutuhan Harian</option>
    <option value="makanan">Makanan & Minuman</option>
    <option value="salam">Salam & Sosial</option>
  </select>

  <label for="teks">Teks/Kalimat:</label>
  <input type="text" id="teks" placeholder="Contoh: Saya senang" required />

  <label for="emotikon">Emotikon (emoji):</label>
  <input type="text" id="emotikon" maxlength="2" required />
  <div id="previewEmotikon"></div>

  <button type="submit">Simpan Kosakata</button>
</form>

<h2>Daftar Kosakata</h2>
<ul id="daftar"></ul>

<script>
  const inputEmotikon = document.getElementById('emotikon');
  const preview = document.getElementById('previewEmotikon');
  const kategoriSelect = document.getElementById('kategori');
  const daftar = document.getElementById('daftar');

  inputEmotikon.addEventListener('input', () => {
    preview.textContent = inputEmotikon.value;
  });

  kategoriSelect.addEventListener('change', () => {
    tampilkanKosakata(kategoriSelect.value);
  });

  function simpanKosakata(e) {
    e.preventDefault();
    const kategori = kategoriSelect.value;
    const teks = document.getElementById('teks').value.trim();
    const emoji = inputEmotikon.value.trim();

    if (!kategori) return alert('Pilih kategori terlebih dahulu!');
    if (!teks) return alert('Teks tidak boleh kosong!');
    if (!emoji) return alert('Masukkan emotikon!');

    const key = 'kosakata_' + kategori;
    let arr = JSON.parse(localStorage.getItem(key)) || [];

    if(arr.some(k => k.teks.toLowerCase() === teks.toLowerCase())) {
      return alert('Teks sudah ada di kategori ini!');
    }

    arr.push({ teks, emoji });
    localStorage.setItem(key, JSON.stringify(arr));
    alert('Berhasil disimpan!');

    document.getElementById('formTambah').reset();
    preview.textContent = '';

    tampilkanKosakata(kategori);
  }

  function tampilkanKosakata(kategori) {
    daftar.innerHTML = '';
    if (!kategori) {
      daftar.innerHTML = '<li>Pilih kategori untuk melihat kosakata.</li>';
      return;
    }
    const key = 'kosakata_' + kategori;
    let arr = JSON.parse(localStorage.getItem(key)) || [];

    if(arr.length === 0) {
      daftar.innerHTML = '<li>Belum ada kosakata.</li>';
      return;
    }

    arr.forEach((item, index) => {
      const li = document.createElement('li');
      li.innerHTML = `<span>${item.emoji} ${item.teks}</span> 
                      <button class="del" onclick="hapusKosakata('${kategori}', ${index})">Hapus</button>`;
      daftar.appendChild(li);
    });
  }

  function hapusKosakata(kategori, index) {
    const key = 'kosakata_' + kategori;
    let arr = JSON.parse(localStorage.getItem(key)) || [];
    arr.splice(index, 1);
    localStorage.setItem(key, JSON.stringify(arr));
    tampilkanKosakata(kategori);
  }

  // Load awal
  window.onload = () => {
    tampilkanKosakata(kategoriSelect.value);
  };
</script>

</body>
</html>
